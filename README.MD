Parfait ! Voici le setup idÃ©al dâ€™un repo Advent of Code en OCaml, gÃ©nÃ©rÃ© proprement avec dune, avec :

un exÃ©cutable par jour (day01, day02, â€¦)

un module de lib partagÃ© (utils)

une structure claire pour stocker les inputs

une commande simple pour lancer chaque jour

ğŸ„ Tu vas obtenir un squelette prÃªt Ã  coder ton AoC 2024/2025.

âœ… 1. CrÃ©er le dossier du projet
mkdir advent-of-code
cd advent-of-code

âœ… 2. CrÃ©er le projet dune
dune init proj aoc


Cela te donne la structure classique.

On va maintenant lâ€™adapter au format Advent of Code.

ğŸ 3. Structure recommandÃ©e

Voici ce que nous voulons obtenir :

advent-of-code/
â”œâ”€â”€ dune-project
â”œâ”€â”€ aoc.opam
â”œâ”€â”€ bin/
â”‚   â”œâ”€â”€ dune
â”‚   â”œâ”€â”€ day01.ml
â”‚   â”œâ”€â”€ day02.ml
â”‚   â””â”€â”€ ...
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ dune
â”‚   â””â”€â”€ utils.ml
â”œâ”€â”€ inputs/
â”‚   â”œâ”€â”€ day01.txt
â”‚   â”œâ”€â”€ day02.txt
â”‚   â””â”€â”€ ...
â””â”€â”€ test/

âœ… 4. GÃ©nÃ©rer les fichiers dune pour les days
ğŸ‘‰ bin/dune

Remplace ton bin/dune par :

(executables
 (names day01 day02)
 (libraries aoc))


â¡ï¸ Tu pourras ajouter day03 etc. au fur et Ã  mesure.

ğŸ›  5. Exemple minimal de fichiers
ğŸ‘‰ bin/day01.ml
let () =
  let input = In_channel.read_all "inputs/day01.txt" in
  print_endline ("Day 01 â€” part 1: " ^ string_of_int (String.length input));
  print_endline ("Day 01 â€” part 2: TODO");

ğŸ‘‰ bin/day02.ml
let () = print_endline "Day 02 â€” not implemented yet"

ğŸ‘‰ lib/dune
(library
 (name aoc))

ğŸ‘‰ lib/utils.ml
let read_input filename =
  In_channel.read_all ("inputs/" ^ filename)

ğŸš€ 6. Lancer un jour

Depuis la racine :

dune exec day01


ou

dune exec bin/day01.exe

ğŸ„ 7. Ajouter un nouveau jour automatiquement

Tu veux que je te gÃ©nÃ¨re une commande bash pour crÃ©er automatiquement :

bin/dayXX.ml

inputs/dayXX.txt

mettre Ã  jour bin/dune

?

Ou bien je peux te gÃ©nÃ©rer un script dune ou une commande Makefile pour automatiser tout Ã§a.

ğŸ‘‰ Dis-moi si tu veux une automatisation !